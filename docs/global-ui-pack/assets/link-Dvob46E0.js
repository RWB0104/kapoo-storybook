import{a as se,g as de}from"./index-BCzbi48b.js";import{r as pe}from"./_interop_require_wildcard-BpaVepTj.js";import{r as he}from"./jsx-runtime-BEh3FTX5.js";import{r as me,a as be,b as ve,c as ye,d as ge,e as _e,f as ke}from"./add-base-path-n6-ptJRL.js";import{r as Le}from"./router-context.shared-runtime-C2cXhtTv.js";import{r as Re}from"./request-idle-callback-DsHw8iFN.js";import{r as qe}from"./use-merged-ref-CA1Bo7Ed.js";var S={exports:{}},w={exports:{}},ne;function Pe(){return ne||(ne=1,function(O,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useIntersection",{enumerable:!0,get:function(){return K}});const g=se(),j=Re(),s=typeof IntersectionObserver=="function",M=new Map,q=[];function H(d){const a={root:d.root||null,margin:d.rootMargin||""},_=q.find(l=>l.root===a.root&&l.margin===a.margin);let u;if(_&&(u=M.get(_),u))return u;const h=new Map,c=new IntersectionObserver(l=>{l.forEach(p=>{const k=h.get(p.target),C=p.isIntersecting||p.intersectionRatio>0;k&&C&&k(C)})},d);return u={id:a,observer:c,elements:h},q.push(a),M.set(a,u),u}function N(d,a,_){const{id:u,observer:h,elements:c}=H(_);return c.set(d,a),h.observe(d),function(){if(c.delete(d),h.unobserve(d),c.size===0){h.disconnect(),M.delete(u);const p=q.findIndex(k=>k.root===u.root&&k.margin===u.margin);p>-1&&q.splice(p,1)}}}function K(d){let{rootRef:a,rootMargin:_,disabled:u}=d;const h=u||!s,[c,l]=(0,g.useState)(!1),p=(0,g.useRef)(null),k=(0,g.useCallback)(P=>{p.current=P},[]);(0,g.useEffect)(()=>{if(s){if(h||c)return;const P=p.current;if(P&&P.tagName)return N(P,r=>r&&l(r),{root:a==null?void 0:a.current,rootMargin:_})}else if(!c){const P=(0,j.requestIdleCallback)(()=>l(!0));return()=>(0,j.cancelIdleCallback)(P)}},[h,_,a,c,p.current]);const C=(0,g.useCallback)(()=>{l(!1)},[]);return[k,c,C]}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),O.exports=e.default)}(w,w.exports)),w.exports}var A={exports:{}},oe;function Me(){return oe||(oe=1,function(O,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getDomainLocale",{enumerable:!0,get:function(){return g}}),me();function g(j,s,M,q){return!1}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),O.exports=e.default)}(A,A.exports)),A.exports}var ie;function Ce(){return ie||(ie=1,function(O,e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return $}});const g=pe(),j=he(),s=g._(se()),M=be(),q=ve(),H=ye(),N=ge(),K=_e(),d=Le(),a=Pe(),_=Me(),u=ke(),h=qe(),c=new Set;function l(r,v,m,i){if(!(typeof window>"u")&&(0,q.isLocalURL)(v)){if(!i.bypassPrefetchedCheck){const L=typeof i.locale<"u"?i.locale:"locale"in r?r.locale:void 0,y=v+"%"+m+"%"+L;if(c.has(y))return;c.add(y)}r.prefetch(v,m,i).catch(L=>{})}}function p(r){const m=r.currentTarget.getAttribute("target");return m&&m!=="_self"||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.nativeEvent&&r.nativeEvent.which===2}function k(r,v,m,i,L,y,U,V){const{nodeName:x}=r.currentTarget;if(x.toUpperCase()==="A"&&(p(r)||!(0,q.isLocalURL)(m)))return;r.preventDefault(),(()=>{const D=U??!0;"beforePopState"in v?v[L?"replace":"push"](m,i,{shallow:y,locale:V,scroll:D}):v[L?"replace":"push"](i||m,{scroll:D})})()}function C(r){return typeof r=="string"?r:(0,H.formatUrl)(r)}const $=s.default.forwardRef(function(v,m){let i;const{href:L,as:y,children:U,prefetch:V=null,passHref:x,replace:z,shallow:F,scroll:D,locale:I,onClick:G,onMouseEnter:J,onTouchStart:W,legacyBehavior:b=!1,...ae}=v;i=U,b&&(typeof i=="string"||typeof i=="number")&&(i=(0,j.jsx)("a",{children:i}));const t=s.default.useContext(d.RouterContext),Q=V!==!1,{href:R,as:f}=s.default.useMemo(()=>{if(!t){const re=C(L);return{href:re,as:y?C(y):re}}const[o,E]=(0,M.resolveHref)(t,L,!0);return{href:o,as:y?(0,M.resolveHref)(t,y):E||o}},[t,L,y]),X=s.default.useRef(R),Y=s.default.useRef(f);let n;b&&(n=s.default.Children.only(i));const ce=b?n&&typeof n=="object"&&n.ref:m,[Z,ee,te]=(0,a.useIntersection)({rootMargin:"200px"}),le=s.default.useCallback(o=>{(Y.current!==f||X.current!==R)&&(te(),Y.current=f,X.current=R),Z(o)},[f,R,te,Z]),fe=(0,h.useMergedRef)(le,ce);s.default.useEffect(()=>{t&&(!ee||!Q||l(t,R,f,{locale:I}))},[f,R,ee,I,Q,t==null?void 0:t.locale,t]);const T={ref:fe,onClick(o){!b&&typeof G=="function"&&G(o),b&&n.props&&typeof n.props.onClick=="function"&&n.props.onClick(o),t&&(o.defaultPrevented||k(o,t,R,f,z,F,D,I))},onMouseEnter(o){!b&&typeof J=="function"&&J(o),b&&n.props&&typeof n.props.onMouseEnter=="function"&&n.props.onMouseEnter(o),t&&l(t,R,f,{locale:I,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(E){!b&&typeof W=="function"&&W(E),b&&n.props&&typeof n.props.onTouchStart=="function"&&n.props.onTouchStart(E),t&&l(t,R,f,{locale:I,priority:!0,bypassPrefetchedCheck:!0})}};if((0,N.isAbsoluteUrl)(f))T.href=f;else if(!b||x||n.type==="a"&&!("href"in n.props)){const o=typeof I<"u"?I:t==null?void 0:t.locale,E=(t==null?void 0:t.isLocaleDomain)&&(0,_.getDomainLocale)(f,o,t==null?void 0:t.locales,t==null?void 0:t.domainLocales);T.href=E||(0,u.addBasePath)((0,K.addLocale)(f,o,t==null?void 0:t.defaultLocale))}return b?s.default.cloneElement(n,T):(0,j.jsx)("a",{...ae,...T,children:i})});(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),O.exports=e.default)}(S,S.exports)),S.exports}var B,ue;function Ie(){return ue||(ue=1,B=Ce()),B}var je=Ie();const Ae=de(je);export{Ae as L};
