var mt=e=>{throw TypeError(e)};var tt=(e,t,s)=>t.has(e)||mt("Cannot "+s);var r=(e,t,s)=>(tt(e,t,"read from private field"),s?s.call(e):t.get(e)),p=(e,t,s)=>t.has(e)?mt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),h=(e,t,s,i)=>(tt(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),d=(e,t,s)=>(tt(e,t,"access private method"),s);import{j as B}from"./jsx-runtime-BnHmloXs.js";import{r as w}from"./index-CKMdfnwt.js";import{g as Ft,S as gt,a as yt}from"./storybook-CWpip0ZO.js";import{S as Ut}from"./StorybookTemplate-h4nRBuW0.js";import{C as Gt,p as Lt}from"./ContentGrid-CmnBzN0w.js";import{p as At}from"./projects-BrhWMSQo.js";import{S as Nt,l as bt,q as P,t as et,r as $,b as Bt,u as st,v as Rt,w as Ht,g as qt,x as Jt,y as Ct,n as Qt,z as zt}from"./QueryClientProvider-CWs8F8KB.js";import{a as Wt,t as Vt}from"./util-CRaRbDSx.js";import"./jsx-runtime-BEh3FTX5.js";import"./utils-jAU0Cazi.js";import"./ContentCard-BP_drmpG.js";import"./link-DlSupBxQ.js";import"./segment-CIEV7OGa.js";import"./add-base-path-zrht_gGq.js";import"./router-context.shared-runtime-Cv5SBY9_.js";import"./use-merged-ref-CTvqUzqe.js";import"./Img-4q12Fo_9.js";import"./index-BY638psU.js";import"./image-context-W3FUK0Wx.js";import"./AspectRatio-CsdoW76c.js";import"./index-Bo4N8-Op.js";import"./index-BZRNBTKr.js";import"./index-Bb5hAbjD.js";import"./ContentTag-B6wAOjq6.js";import"./index-D_ldaswd.js";var b,n,q,y,I,M,x,v,J,_,F,k,j,E,U,a,H,rt,it,nt,at,ot,ct,ut,Dt,Ot,Kt=(Ot=class extends Nt{constructor(t,s){super();p(this,a);p(this,b);p(this,n);p(this,q);p(this,y);p(this,I);p(this,M);p(this,x);p(this,v);p(this,J);p(this,_);p(this,F);p(this,k);p(this,j);p(this,E);p(this,U,new Set);this.options=s,h(this,b,t),h(this,v,null),h(this,x,bt()),this.options.experimental_prefetchInRender||r(this,x).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,n).addObserver(this),St(r(this,n),this.options)?d(this,a,H).call(this):this.updateResult(),d(this,a,at).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ht(r(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ht(r(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,a,ot).call(this),d(this,a,ct).call(this),r(this,n).removeObserver(this)}setOptions(t,s){const i=this.options,l=r(this,n);if(this.options=r(this,b).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof P(this.options.enabled,r(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,a,ut).call(this),r(this,n).setOptions(this.options),i._defaulted&&!et(this.options,i)&&r(this,b).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,n),observer:this});const c=this.hasListeners();c&&vt(r(this,n),l,this.options,i)&&d(this,a,H).call(this),this.updateResult(s),c&&(r(this,n)!==l||P(this.options.enabled,r(this,n))!==P(i.enabled,r(this,n))||$(this.options.staleTime,r(this,n))!==$(i.staleTime,r(this,n)))&&d(this,a,rt).call(this);const o=d(this,a,it).call(this);c&&(r(this,n)!==l||P(this.options.enabled,r(this,n))!==P(i.enabled,r(this,n))||o!==r(this,E))&&d(this,a,nt).call(this,o)}getOptimisticResult(t){const s=r(this,b).getQueryCache().build(r(this,b),t),i=this.createResult(s,t);return Xt(this,i)&&(h(this,y,i),h(this,M,this.options),h(this,I,r(this,n).state)),i}getCurrentResult(){return r(this,y)}trackResult(t,s){const i={};return Object.keys(t).forEach(l=>{Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),s==null||s(l),t[l])})}),i}trackProp(t){r(this,U).add(t)}getCurrentQuery(){return r(this,n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=r(this,b).defaultQueryOptions(t),i=r(this,b).getQueryCache().build(r(this,b),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(t){return d(this,a,H).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,y)))}createResult(t,s){var ft;const i=r(this,n),l=this.options,c=r(this,y),o=r(this,I),T=r(this,M),C=t!==i?t.state:r(this,q),{state:O}=t;let u={...O},G=!1,m;if(s._optimisticResults){const g=this.hasListeners(),Q=!g&&St(t,s),D=g&&vt(t,i,s,l);(Q||D)&&(u={...u,...Jt(O.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:L,errorUpdatedAt:A,status:R}=u;if(s.select&&u.data!==void 0)if(c&&u.data===(o==null?void 0:o.data)&&s.select===r(this,J))m=r(this,_);else try{h(this,J,s.select),m=s.select(u.data),m=Ct(c==null?void 0:c.data,m,s),h(this,_,m),h(this,v,null)}catch(g){h(this,v,g)}else m=u.data;if(s.placeholderData!==void 0&&m===void 0&&R==="pending"){let g;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(T==null?void 0:T.placeholderData))g=c.data;else if(g=typeof s.placeholderData=="function"?s.placeholderData((ft=r(this,F))==null?void 0:ft.state.data,r(this,F)):s.placeholderData,s.select&&g!==void 0)try{g=s.select(g),h(this,v,null)}catch(Q){h(this,v,Q)}g!==void 0&&(R="success",m=Ct(c==null?void 0:c.data,g,s),G=!0)}r(this,v)&&(L=r(this,v),m=r(this,_),A=Date.now(),R="error");const N=u.fetchStatus==="fetching",Z=R==="pending",Y=R==="error",dt=Z&&N,pt=m!==void 0,S={status:R,fetchStatus:u.fetchStatus,isPending:Z,isSuccess:R==="success",isError:Y,isInitialLoading:dt,isLoading:dt,data:m,dataUpdatedAt:u.dataUpdatedAt,error:L,errorUpdatedAt:A,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>C.dataUpdateCount||u.errorUpdateCount>C.errorUpdateCount,isFetching:N,isRefetching:N&&!Z,isLoadingError:Y&&!pt,isPaused:u.fetchStatus==="paused",isPlaceholderData:G,isRefetchError:Y&&pt,isStale:lt(t,s),refetch:this.refetch,promise:r(this,x)};if(this.options.experimental_prefetchInRender){const g=z=>{S.status==="error"?z.reject(S.error):S.data!==void 0&&z.resolve(S.data)},Q=()=>{const z=h(this,x,S.promise=bt());g(z)},D=r(this,x);switch(D.status){case"pending":t.queryHash===i.queryHash&&g(D);break;case"fulfilled":(S.status==="error"||S.data!==D.value)&&Q();break;case"rejected":(S.status!=="error"||S.error!==D.reason)&&Q();break}}return S}updateResult(t){const s=r(this,y),i=this.createResult(r(this,n),this.options);if(h(this,I,r(this,n).state),h(this,M,this.options),r(this,I).data!==void 0&&h(this,F,r(this,n)),et(i,s))return;h(this,y,i);const l={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,T=typeof o=="function"?o():o;if(T==="all"||!T&&!r(this,U).size)return!0;const f=new Set(T??r(this,U));return this.options.throwOnError&&f.add("error"),Object.keys(r(this,y)).some(C=>{const O=C;return r(this,y)[O]!==s[O]&&f.has(O)})};(t==null?void 0:t.listeners)!==!1&&c()&&(l.listeners=!0),d(this,a,Dt).call(this,{...l,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,a,at).call(this)}},b=new WeakMap,n=new WeakMap,q=new WeakMap,y=new WeakMap,I=new WeakMap,M=new WeakMap,x=new WeakMap,v=new WeakMap,J=new WeakMap,_=new WeakMap,F=new WeakMap,k=new WeakMap,j=new WeakMap,E=new WeakMap,U=new WeakMap,a=new WeakSet,H=function(t){d(this,a,ut).call(this);let s=r(this,n).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Bt)),s},rt=function(){d(this,a,ot).call(this);const t=$(this.options.staleTime,r(this,n));if(st||r(this,y).isStale||!Rt(t))return;const i=Ht(r(this,y).dataUpdatedAt,t)+1;h(this,k,setTimeout(()=>{r(this,y).isStale||this.updateResult()},i))},it=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,n)):this.options.refetchInterval)??!1},nt=function(t){d(this,a,ct).call(this),h(this,E,t),!(st||P(this.options.enabled,r(this,n))===!1||!Rt(r(this,E))||r(this,E)===0)&&h(this,j,setInterval(()=>{(this.options.refetchIntervalInBackground||qt.isFocused())&&d(this,a,H).call(this)},r(this,E)))},at=function(){d(this,a,rt).call(this),d(this,a,nt).call(this,d(this,a,it).call(this))},ot=function(){r(this,k)&&(clearTimeout(r(this,k)),h(this,k,void 0))},ct=function(){r(this,j)&&(clearInterval(r(this,j)),h(this,j,void 0))},ut=function(){const t=r(this,b).getQueryCache().build(r(this,b),this.options);if(t===r(this,n))return;const s=r(this,n);h(this,n,t),h(this,q,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Dt=function(t){Qt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(r(this,y))}),r(this,b).getQueryCache().notify({query:r(this,n),type:"observerResultsUpdated"})})},Ot);function $t(e,t){return P(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function St(e,t){return $t(e,t)||e.state.data!==void 0&&ht(e,t,t.refetchOnMount)}function ht(e,t,s){if(P(t.enabled,e)!==!1){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&lt(e,t)}return!1}function vt(e,t,s,i){return(e!==t||P(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&lt(e,s)}function lt(e,t){return P(t.enabled,e)!==!1&&e.isStaleByTime($(t.staleTime,e))}function Xt(e,t){return!et(e.getCurrentResult(),t)}var Mt=w.createContext(!1),Zt=()=>w.useContext(Mt);Mt.Provider;function Yt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var te=w.createContext(Yt()),ee=()=>w.useContext(te);function se(e,t){return typeof e=="function"?e(...t):!!e}function Pt(){}var re=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ie=e=>{w.useEffect(()=>{e.clearReset()},[e])},ne=({result:e,errorResetBoundary:t,throwOnError:s,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&se(s,[e.error,i]),ae=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...s)=>Math.max(t(...s),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},oe=(e,t)=>e.isLoading&&e.isFetching&&!t,ce=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Tt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ue(e,t,s){var u,G,m,L,A;const i=zt(),l=Zt(),c=ee(),o=i.defaultQueryOptions(e);(G=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||G.call(u,o),o._optimisticResults=l?"isRestoring":"optimistic",ae(o),re(o,c),ie(c);const T=!i.getQueryCache().get(o.queryHash),[f]=w.useState(()=>new t(i,o)),C=f.getOptimisticResult(o),O=!l&&e.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(R=>{const N=O?f.subscribe(Qt.batchCalls(R)):Pt;return f.updateResult(),N},[f,O]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),w.useEffect(()=>{f.setOptions(o,{listeners:!1})},[o,f]),ce(o,C))throw Tt(o,f,c);if(ne({result:C,errorResetBoundary:c,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash)}))throw C.error;if((L=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||L.call(m,o,C),o.experimental_prefetchInRender&&!st&&oe(C,l)){const R=T?Tt(o,f,c):(A=i.getQueryCache().get(o.queryHash))==null?void 0:A.promise;R==null||R.catch(Pt).finally(()=>{f.updateResult()})}return o.notifyOnChangeProps?C:f.trackResult(C)}function he(e,t){return ue(e,Kt)}async function le({clientId:e,clientSecret:t,refreshToken:s}){const i=await fetch("https://accounts.google.com/o/oauth2/token",{body:JSON.stringify({client_id:e,client_secret:t,grant_type:"refresh_token",refresh_token:s}),method:"POST"});if(i.ok)return await i.json()}async function de(e,t){const s=await fetch("https://content-analyticsdata.googleapis.com/v1beta/properties/284521573:runReport?alt=json",{body:JSON.stringify({dateRanges:[{endDate:"today",startDate:"30daysAgo"}],dimensionFilter:{filter:{fieldName:"pagePath",stringFilter:{matchType:"BEGINS_WITH",value:`/${e}/2`}}},dimensions:[{name:"pagePath"}],limit:6,metricAggregations:["TOTAL"],metrics:[{name:"active28DayUsers"}]}),headers:{Authorization:`${t.token_type} ${t.access_token}`},method:"POST"});if(s.ok)return await s.json()}function pe(e,t,s,i){return he({queryFn:async()=>{const l=await le(e);if(l)return de(t,l);throw Error("Google 인증 에러")},queryKey:["usePostPopularData",t],...s})}function X({type:e,list:t,...s}){const{data:i,isLoading:l}=pe({clientId:"22130300203-s47tft38ah28e6o2jsv5144vqn1cl32p.apps.googleusercontent.com",clientSecret:"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",refreshToken:"1//04SoK9dOIeQQDCgYIARAAGAQSNwF-L9IrNkGEGZ5xuJSsDuT5NbSMUWBd9sFrbtdv3hegoJZmQqSITRMCVMy1y71_DJZl4TsMEac"},e),c=Wt(t,i);return B.jsx(Gt,{"data-component":"ContentPopularGrid",list:Vt(c),loading:l,...s})}X.__docgenInfo={description:`컨텐츠 인기 그리드 organism 컴포넌트 반환 메서드

@param {ContentPopularGridProps} param0: ContentPopularGridProps

@returns {React.JSX.Element} JSX`,methods:[],displayName:"ContentPopularGrid",props:{type:{required:!0,tsType:{name:"union",raw:"'posts' | 'projects'",elements:[{name:"literal",value:"'posts'"},{name:"literal",value:"'projects'"}]},description:"마크다운 타입"},list:{required:!1,tsType:{name:"Array",elements:[{name:"BlogMarkdownDetailProps",elements:[{name:"MarkdownHeaderProps"}],raw:"BlogMarkdownDetailProps<MarkdownHeaderProps>"}],raw:"BlogMarkdownDetailProps<MarkdownHeaderProps>[]"},description:"컨텐츠 목록"}},composes:["Omit"]};const W="ContentPopularGrid",fe=["posts","projects"],_t=Lt,me=At,He={argTypes:{className:yt("children",W),id:yt("id",W),list:{control:{disable:!0},table:{category:W,subcategory:gt.PROP}},type:{options:fe,table:{category:W,subcategory:gt.PROP}}},component:X,parameters:Ft("컨텐츠 인기 그리드 컴포넌트",["`ContentGrid` 컴포넌트를 확장하여 인기 컨텐츠를 표현하는 컴포넌트입니다.","`usePostPopularData` API가 내장되어있어, 자동으로 지정한 타입의 인기 게시글 6개를 호출합니다."]),tags:["autodocs"],title:"organism/ContentPopularGrid"},V={args:{list:_t,type:"posts"}},K={render:e=>B.jsx(Ut,{subtitle:"컨텐츠 타입에 따른 컴포넌트 예시",title:"Type",container:!0,children:B.jsxs("div",{className:"flex flex-col gap-20",children:[B.jsx(X,{...e,list:_t,type:"posts"}),B.jsx(X,{...e,list:me,type:"projects"})]})})};var wt,xt,Et;V.parameters={...V.parameters,docs:{...(wt=V.parameters)==null?void 0:wt.docs,source:{originalSource:`{
  args: {
    list: postsMock,
    type: 'posts'
  }
}`,...(Et=(xt=V.parameters)==null?void 0:xt.docs)==null?void 0:Et.source}}};var It,kt,jt;K.parameters={...K.parameters,docs:{...(It=K.parameters)==null?void 0:It.docs,source:{originalSource:`{
  render: props => <StorybookTemplate subtitle="컨텐츠 타입에 따른 컴포넌트 예시" title="Type" container>
            <div className="flex flex-col gap-20">
                <ContentPopularGrid {...props} list={postsMock} type="posts" />
                <ContentPopularGrid {...props} list={projectsMock} type="projects" />
            </div>
        </StorybookTemplate>
}`,...(jt=(kt=K.parameters)==null?void 0:kt.docs)==null?void 0:jt.source}}};const qe=["Playground","Type"];export{V as Playground,K as Type,qe as __namedExportsOrder,He as default};
