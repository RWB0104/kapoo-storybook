import{b as se,g as de}from"./index-BzsBhNef.js";import{r as pe}from"./segment-CIEV7OGa.js";import{r as he}from"./jsx-runtime-BEh3FTX5.js";import{r as be,a as me,b as ve,c as ge,d as ye,e as _e,f as ke,g as Le}from"./add-base-path-zrht_gGq.js";import{r as Re}from"./router-context.shared-runtime-teXhwerE.js";import{r as qe}from"./use-merged-ref-b3ysbXhA.js";var S={exports:{}},w={exports:{}},ne;function Pe(){return ne||(ne=1,function(O,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useIntersection",{enumerable:!0,get:function(){return K}});const y=se(),j=be(),s=typeof IntersectionObserver=="function",M=new Map,q=[];function H(d){const a={root:d.root||null,margin:d.rootMargin||""},_=q.find(l=>l.root===a.root&&l.margin===a.margin);let u;if(_&&(u=M.get(_),u))return u;const h=new Map,c=new IntersectionObserver(l=>{l.forEach(p=>{const k=h.get(p.target),C=p.isIntersecting||p.intersectionRatio>0;k&&C&&k(C)})},d);return u={id:a,observer:c,elements:h},q.push(a),M.set(a,u),u}function N(d,a,_){const{id:u,observer:h,elements:c}=H(_);return c.set(d,a),h.observe(d),function(){if(c.delete(d),h.unobserve(d),c.size===0){h.disconnect(),M.delete(u);const p=q.findIndex(k=>k.root===u.root&&k.margin===u.margin);p>-1&&q.splice(p,1)}}}function K(d){let{rootRef:a,rootMargin:_,disabled:u}=d;const h=u||!s,[c,l]=(0,y.useState)(!1),p=(0,y.useRef)(null),k=(0,y.useCallback)(P=>{p.current=P},[]);(0,y.useEffect)(()=>{if(s){if(h||c)return;const P=p.current;if(P&&P.tagName)return N(P,r=>r&&l(r),{root:a==null?void 0:a.current,rootMargin:_})}else if(!c){const P=(0,j.requestIdleCallback)(()=>l(!0));return()=>(0,j.cancelIdleCallback)(P)}},[h,_,a,c,p.current]);const C=(0,y.useCallback)(()=>{l(!1)},[]);return[k,c,C]}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),O.exports=e.default)}(w,w.exports)),w.exports}var A={exports:{}},oe;function Me(){return oe||(oe=1,function(O,e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getDomainLocale",{enumerable:!0,get:function(){return y}}),me();function y(j,s,M,q){return!1}(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),O.exports=e.default)}(A,A.exports)),A.exports}var ie;function Ce(){return ie||(ie=1,function(O,e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return $}});const y=pe(),j=he(),s=y._(se()),M=ve(),q=ge(),H=ye(),N=_e(),K=ke(),d=Re(),a=Pe(),_=Me(),u=Le(),h=qe(),c=new Set;function l(r,v,b,i){if(!(typeof window>"u")&&(0,q.isLocalURL)(v)){if(!i.bypassPrefetchedCheck){const L=typeof i.locale<"u"?i.locale:"locale"in r?r.locale:void 0,g=v+"%"+b+"%"+L;if(c.has(g))return;c.add(g)}r.prefetch(v,b,i).catch(L=>{})}}function p(r){const b=r.currentTarget.getAttribute("target");return b&&b!=="_self"||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.nativeEvent&&r.nativeEvent.which===2}function k(r,v,b,i,L,g,U,V){const{nodeName:x}=r.currentTarget;if(x.toUpperCase()==="A"&&(p(r)||!(0,q.isLocalURL)(b)))return;r.preventDefault(),(()=>{const D=U??!0;"beforePopState"in v?v[L?"replace":"push"](b,i,{shallow:g,locale:V,scroll:D}):v[L?"replace":"push"](i||b,{scroll:D})})()}function C(r){return typeof r=="string"?r:(0,H.formatUrl)(r)}const $=s.default.forwardRef(function(v,b){let i;const{href:L,as:g,children:U,prefetch:V=null,passHref:x,replace:z,shallow:F,scroll:D,locale:I,onClick:G,onMouseEnter:J,onTouchStart:W,legacyBehavior:m=!1,...ae}=v;i=U,m&&(typeof i=="string"||typeof i=="number")&&(i=(0,j.jsx)("a",{children:i}));const t=s.default.useContext(d.RouterContext),Q=V!==!1,{href:R,as:f}=s.default.useMemo(()=>{if(!t){const re=C(L);return{href:re,as:g?C(g):re}}const[o,E]=(0,M.resolveHref)(t,L,!0);return{href:o,as:g?(0,M.resolveHref)(t,g):E||o}},[t,L,g]),X=s.default.useRef(R),Y=s.default.useRef(f);let n;m&&(n=s.default.Children.only(i));const ce=m?n&&typeof n=="object"&&n.ref:b,[Z,ee,te]=(0,a.useIntersection)({rootMargin:"200px"}),le=s.default.useCallback(o=>{(Y.current!==f||X.current!==R)&&(te(),Y.current=f,X.current=R),Z(o)},[f,R,te,Z]),fe=(0,h.useMergedRef)(le,ce);s.default.useEffect(()=>{t&&(!ee||!Q||l(t,R,f,{locale:I}))},[f,R,ee,I,Q,t==null?void 0:t.locale,t]);const T={ref:fe,onClick(o){!m&&typeof G=="function"&&G(o),m&&n.props&&typeof n.props.onClick=="function"&&n.props.onClick(o),t&&(o.defaultPrevented||k(o,t,R,f,z,F,D,I))},onMouseEnter(o){!m&&typeof J=="function"&&J(o),m&&n.props&&typeof n.props.onMouseEnter=="function"&&n.props.onMouseEnter(o),t&&l(t,R,f,{locale:I,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(E){!m&&typeof W=="function"&&W(E),m&&n.props&&typeof n.props.onTouchStart=="function"&&n.props.onTouchStart(E),t&&l(t,R,f,{locale:I,priority:!0,bypassPrefetchedCheck:!0})}};if((0,N.isAbsoluteUrl)(f))T.href=f;else if(!m||x||n.type==="a"&&!("href"in n.props)){const o=typeof I<"u"?I:t==null?void 0:t.locale,E=(t==null?void 0:t.isLocaleDomain)&&(0,_.getDomainLocale)(f,o,t==null?void 0:t.locales,t==null?void 0:t.domainLocales);T.href=E||(0,u.addBasePath)((0,K.addLocale)(f,o,t==null?void 0:t.defaultLocale))}return m?s.default.cloneElement(n,T):(0,j.jsx)("a",{...ae,...T,children:i})});(typeof e.default=="function"||typeof e.default=="object"&&e.default!==null)&&typeof e.default.__esModule>"u"&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),O.exports=e.default)}(S,S.exports)),S.exports}var B,ue;function Ie(){return ue||(ue=1,B=Ce()),B}var je=Ie();const we=de(je);export{we as L};
