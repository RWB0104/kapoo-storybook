var ee=t=>{throw TypeError(t)};var Z=(t,e,s)=>e.has(t)||ee("Cannot "+s);var i=(t,e,s)=>(Z(t,e,"read from private field"),s?s.call(t):e.get(t)),c=(t,e,s)=>e.has(t)?ee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),o=(t,e,s,r)=>(Z(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),D=(t,e,s)=>(Z(t,e,"access private method"),s);var X=(t,e,s,r)=>({set _(a){o(t,e,a,s)},get _(){return i(t,e,r)}});import{j as V}from"./jsx-runtime-BnHmloXs.js";import{d as Ee}from"./index-ogSvIofg.js";import{r as Me}from"./index-BzsBhNef.js";import{U as Qe}from"./index-VWyOwuNZ.js";import{a as Te}from"./hooks-Dz_XSX3z.js";import"./github-CZ9b3_v3.js";import{t as we}from"./theme-D_5m8He_.js";import{S as pe,h as ye,Q as Se,n as m,m as te,R as Ce,c as De,a as se,b as M,e as _e,d as Ae,f as Re,g as Fe,o as re,r as ie,i as qe,j as ae,p as ne,s as ke,k as xe}from"./QueryClientProvider-BdP51CjG.js";import"./jsx-runtime-BEh3FTX5.js";var v,le,Ie=(le=class extends pe{constructor(e={}){super();c(this,v);this.config=e,o(this,v,new Map)}build(e,s,r){const a=s.queryKey,n=s.queryHash??ye(a,s);let l=this.get(n);return l||(l=new Se({cache:this,queryKey:a,queryHash:n,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(l)),l}add(e){i(this,v).has(e.queryHash)||(i(this,v).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,v).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,v).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){m.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,v).get(e)}getAll(){return[...i(this,v).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>te(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>te(e,r)):s}notify(e){m.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){m.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){m.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},v=new WeakMap,le),b,d,j,O,_,de,je=(de=class extends Ce{constructor(e){super();c(this,O);c(this,b);c(this,d);c(this,j);this.mutationId=e.mutationId,o(this,d,e.mutationCache),o(this,b,[]),this.state=e.state||He(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,b).includes(e)||(i(this,b).push(e),this.clearGcTimeout(),i(this,d).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){o(this,b,i(this,b).filter(s=>s!==e)),this.scheduleGc(),i(this,d).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,b).length||(this.state.status==="pending"?this.scheduleGc():i(this,d).remove(this))}continue(){var e;return((e=i(this,j))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,n,l,p,y,T,w,q,S,L,B,E,k,z,U,f,g,C,x,J;o(this,j,De({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(h,I)=>{D(this,O,_).call(this,{type:"failed",failureCount:h,error:I})},onPause:()=>{D(this,O,_).call(this,{type:"pause"})},onContinue:()=>{D(this,O,_).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,d).canRun(this)}));const s=this.state.status==="pending",r=!i(this,j).canStart();try{if(!s){D(this,O,_).call(this,{type:"pending",variables:e,isPaused:r}),await((n=(a=i(this,d).config).onMutate)==null?void 0:n.call(a,e,this));const I=await((p=(l=this.options).onMutate)==null?void 0:p.call(l,e));I!==this.state.context&&D(this,O,_).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const h=await i(this,j).start();return await((T=(y=i(this,d).config).onSuccess)==null?void 0:T.call(y,h,e,this.state.context,this)),await((q=(w=this.options).onSuccess)==null?void 0:q.call(w,h,e,this.state.context)),await((L=(S=i(this,d).config).onSettled)==null?void 0:L.call(S,h,null,this.state.variables,this.state.context,this)),await((E=(B=this.options).onSettled)==null?void 0:E.call(B,h,null,e,this.state.context)),D(this,O,_).call(this,{type:"success",data:h}),h}catch(h){try{throw await((z=(k=i(this,d).config).onError)==null?void 0:z.call(k,h,e,this.state.context,this)),await((f=(U=this.options).onError)==null?void 0:f.call(U,h,e,this.state.context)),await((C=(g=i(this,d).config).onSettled)==null?void 0:C.call(g,void 0,h,this.state.variables,this.state.context,this)),await((J=(x=this.options).onSettled)==null?void 0:J.call(x,void 0,h,e,this.state.context)),h}finally{D(this,O,_).call(this,{type:"error",error:h})}}finally{i(this,d).runNext(this)}}},b=new WeakMap,d=new WeakMap,j=new WeakMap,O=new WeakSet,_=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),m.batch(()=>{i(this,b).forEach(r=>{r.onMutationUpdate(e)}),i(this,d).notify({mutation:this,type:"updated",action:e})})},de);function He(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Q,P,Y,fe,Ke=(fe=class extends pe{constructor(e={}){super();c(this,Q);c(this,P);c(this,Y);this.config=e,o(this,Q,new Set),o(this,P,new Map),o(this,Y,0)}build(e,s,r){const a=new je({mutationCache:this,mutationId:++X(this,Y)._,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){i(this,Q).add(e);const s=$(e);if(typeof s=="string"){const r=i(this,P).get(s);r?r.push(e):i(this,P).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,Q).delete(e)){const s=$(e);if(typeof s=="string"){const r=i(this,P).get(s);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&i(this,P).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=$(e);if(typeof s=="string"){const r=i(this,P).get(s),a=r==null?void 0:r.find(n=>n.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const s=$(e);if(typeof s=="string"){const a=(r=i(this,P).get(s))==null?void 0:r.find(n=>n!==e&&n.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){m.batch(()=>{i(this,Q).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,Q).clear(),i(this,P).clear()})}getAll(){return Array.from(i(this,Q))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>se(s,r))}findAll(e={}){return this.getAll().filter(s=>se(e,s))}notify(e){m.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return m.batch(()=>Promise.all(e.map(s=>s.continue().catch(M))))}},Q=new WeakMap,P=new WeakMap,Y=new WeakMap,fe);function $(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ue(t){return{onFetch:(e,s)=>{var w,q,S,L,B;const r=e.options,a=(S=(q=(w=e.fetchOptions)==null?void 0:w.meta)==null?void 0:q.fetchMore)==null?void 0:S.direction,n=((L=e.state.data)==null?void 0:L.pages)||[],l=((B=e.state.data)==null?void 0:B.pageParams)||[];let p={pages:[],pageParams:[]},y=0;const T=async()=>{let E=!1;const k=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},z=_e(e.options,e.fetchOptions),U=async(f,g,C)=>{if(E)return Promise.reject();if(g==null&&f.pages.length)return Promise.resolve(f);const x={queryKey:e.queryKey,pageParam:g,direction:C?"backward":"forward",meta:e.options.meta};k(x);const J=await z(x),{maxPages:h}=e.options,I=C?Ae:Re;return{pages:I(f.pages,J,h),pageParams:I(f.pageParams,g,h)}};if(a&&n.length){const f=a==="backward",g=f?Ne:oe,C={pages:n,pageParams:l},x=g(r,C);p=await U(C,x,f)}else{const f=t??n.length;do{const g=y===0?l[0]??r.initialPageParam:oe(r,p);if(y>0&&g==null)break;p=await U(p,g),y++}while(y<f)}return p};e.options.persister?e.fetchFn=()=>{var E,k;return(k=(E=e.options).persister)==null?void 0:k.call(E,T,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=T}}}function oe(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function Ne(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var u,A,R,H,K,F,N,G,me,Ge=(me=class{constructor(t={}){c(this,u);c(this,A);c(this,R);c(this,H);c(this,K);c(this,F);c(this,N);c(this,G);o(this,u,t.queryCache||new Ie),o(this,A,t.mutationCache||new Ke),o(this,R,t.defaultOptions||{}),o(this,H,new Map),o(this,K,new Map),o(this,F,0)}mount(){X(this,F)._++,i(this,F)===1&&(o(this,N,Fe.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,u).onFocus())})),o(this,G,re.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,u).onOnline())})))}unmount(){var t,e;X(this,F)._--,i(this,F)===0&&((t=i(this,N))==null||t.call(this),o(this,N,void 0),(e=i(this,G))==null||e.call(this),o(this,G,void 0))}isFetching(t){return i(this,u).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,A).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,u).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=i(this,u).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ie(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return i(this,u).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),a=i(this,u).get(r.queryHash),n=a==null?void 0:a.state.data,l=qe(e,n);if(l!==void 0)return i(this,u).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return m.batch(()=>i(this,u).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,u).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,u);m.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,u),r={type:"active",...t};return m.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=m.batch(()=>i(this,u).findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(M).catch(M)}invalidateQueries(t,e={}){return m.batch(()=>{if(i(this,u).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const s={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(s,e)})}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=m.batch(()=>i(this,u).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let n=a.fetch(void 0,s);return s.throwOnError||(n=n.catch(M)),a.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(r).then(M)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,u).build(this,e);return s.isStaleByTime(ie(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(M).catch(M)}fetchInfiniteQuery(t){return t.behavior=ue(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(M).catch(M)}ensureInfiniteQueryData(t){return t.behavior=ue(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return re.isOnline()?i(this,A).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,u)}getMutationCache(){return i(this,A)}getDefaultOptions(){return i(this,R)}setDefaultOptions(t){o(this,R,t)}setQueryDefaults(t,e){i(this,H).set(ae(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,H).values()],s={};return e.forEach(r=>{ne(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){i(this,K).set(ae(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,K).values()];let s={};return e.forEach(r=>{ne(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,R).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ye(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ke&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,R).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,u).clear(),i(this,A).clear()}},u=new WeakMap,A=new WeakMap,R=new WeakMap,H=new WeakMap,K=new WeakMap,F=new WeakMap,N=new WeakMap,G=new WeakMap,me);const{useParameter:Le,addons:Be,useEffect:Ue,useMemo:pt,definePreview:yt}=__STORYBOOK_MODULE_PREVIEW_API__,{deprecate:Ve}=__STORYBOOK_MODULE_CLIENT_LOGGER__;var Ye=Object.defineProperty,ge=(t,e)=>{for(var s in e)Ye(t,s,{get:e[s],enumerable:!0})},ze={};ge(ze,{initialGlobals:()=>$e});var W="themes",Je=`storybook/${W}`,Pe="theme",he={},Xe={REGISTER_THEMES:`${Je}/REGISTER_THEMES`},$e={[Pe]:""},We={};ge(We,{initializeThemeState:()=>be,pluckThemeFromContext:()=>ve,useThemeParameters:()=>Ze});function ve({globals:t}){return t[Pe]||""}function Ze(t){return Ve(Ee`The useThemeParameters function is deprecated. Please access parameters via the context directly instead e.g.
    - const { themeOverride } = context.parameters.themes ?? {};
    `),t?t.parameters[W]??he:Le(W,he)}function be(t,e){Be.getChannel().emit(Xe.REGISTER_THEMES,{defaultTheme:e,themes:t})}var et="html",ce=t=>t.split(" ").filter(Boolean),tt=({themes:t,defaultTheme:e,parentSelector:s=et})=>(be(Object.keys(t),e),(r,a)=>{let{themeOverride:n}=a.parameters[W]??{},l=ve(a);return Ue(()=>{let p=n||l||e,y=document.querySelector(s);if(!y)return;Object.entries(t).filter(([w])=>w!==p).forEach(([w,q])=>{let S=ce(q);S.length>0&&y.classList.remove(...S)});let T=ce(t[p]);T.length>0&&y.classList.add(...T)},[n,l]),r()});function st({children:t}){const{setThemeState:e}=we();return Te(document.documentElement,s=>{if(s.attributeName==="class"){const r=document.documentElement.classList.contains("dark");e(r?"dark":"light")}},{attributeFilter:["class"],attributeOldValue:!0,attributes:!0}),t}var rt=function(){return null};function Oe({client:t,buttonPosition:e,children:s}){const r=Me.useMemo(()=>t??new Ge({defaultOptions:{queries:{staleTime:36e5}}}),[t]);return V.jsxs(xe,{client:r,children:[s,V.jsx(rt,{buttonPosition:e})]})}Oe.__docgenInfo={description:`react-query 프로바이더 organism 컴포넌트 반환 메서드

@returns {React.JSX.Element} JSX`,methods:[],displayName:"QueryProvider",props:{client:{required:!1,tsType:{name:"QueryClient"},description:"기본 react-query 객체"},buttonPosition:{required:!1,tsType:{name:"ComponentProps['buttonPosition']",raw:"ComponentProps<typeof ReactQueryDevtools>['buttonPosition']"},description:"버튼 위치"}},composes:["PropsWithChildren"]};const it=Qe({base:"dark",fontBase:"Pretendard, sans-serif"}),gt={decorators:[tt({defaultTheme:"dark",themes:{dark:"dark",light:""}}),(t,e)=>V.jsx(Oe,{children:V.jsx(st,{children:V.jsx(t,{...e})})})],globalTypes:{theme:{defaultValue:"dark",description:"Global theme for components",name:"Theme",toolbar:{icon:"moon",items:[{icon:"sun",title:"Light Mode",value:"light"},{icon:"moon",title:"Dark Mode",value:"dark"}],showName:!0}}},parameters:{docs:{theme:it}}};export{gt as default};
