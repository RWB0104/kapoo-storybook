var me=t=>{throw TypeError(t)};var ee=(t,e,s)=>e.has(t)||me("Cannot "+s);var r=(t,e,s)=>(ee(t,e,"read from private field"),s?s.call(t):e.get(t)),p=(t,e,s)=>e.has(t)?me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),h=(t,e,s,i)=>(ee(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),l=(t,e,s)=>(ee(t,e,"access private method"),s);import{S as Ue,p as ge,d as S,s as te,e as X,n as _e,i as se,f as ye,g as Le,h as Ge,k as Be,l as be,m as Qe,r as x,o as Ae,j as H}from"./iframe-DIrS4rnj.js";import{g as He,S as Re,a as Ce}from"./storybook-CWpip0ZO.js";import{S as Ne}from"./StorybookTemplate-D0mmKJO6.js";import{C as qe,p as ze}from"./ContentGrid-y02eAUpx.js";import{p as Ve}from"./projects-BrhWMSQo.js";import{t as We}from"./util-DseDwWqP.js";import"./utils-jAU0Cazi.js";import"./ContentCard-CJ_sm63s.js";import"./link-BUWyp33c.js";import"./use-merged-ref-etEBFTTl.js";import"./Img-BqvSmBQe.js";import"./AspectRatio-BtWwDo06.js";import"./index-DGlsa-Ho.js";import"./index-BBQLOLHq.js";import"./index-DhvoB8oL.js";import"./ContentTag-B0VAIFg4.js";import"./index-D_ldaswd.js";var b,n,q,y,I,D,w,P,z,F,U,j,M,E,_,o,N,re,ie,ne,ae,oe,ce,ue,ke,Oe,Je=(Oe=class extends Ue{constructor(e,s){super();p(this,o);p(this,b);p(this,n);p(this,q);p(this,y);p(this,I);p(this,D);p(this,w);p(this,P);p(this,z);p(this,F);p(this,U);p(this,j);p(this,M);p(this,E);p(this,_,new Set);this.options=s,h(this,b,e),h(this,P,null),h(this,w,ge()),this.options.experimental_prefetchInRender||r(this,w).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,n).addObserver(this),ve(r(this,n),this.options)?l(this,o,N).call(this):this.updateResult(),l(this,o,ae).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return he(r(this,n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return he(r(this,n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,o,oe).call(this),l(this,o,ce).call(this),r(this,n).removeObserver(this)}setOptions(e,s){const i=this.options,d=r(this,n);if(this.options=r(this,b).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof S(this.options.enabled,r(this,n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");l(this,o,ue).call(this),r(this,n).setOptions(this.options),i._defaulted&&!te(this.options,i)&&r(this,b).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,n),observer:this});const c=this.hasListeners();c&&Pe(r(this,n),d,this.options,i)&&l(this,o,N).call(this),this.updateResult(s),c&&(r(this,n)!==d||S(this.options.enabled,r(this,n))!==S(i.enabled,r(this,n))||X(this.options.staleTime,r(this,n))!==X(i.staleTime,r(this,n)))&&l(this,o,re).call(this);const a=l(this,o,ie).call(this);c&&(r(this,n)!==d||S(this.options.enabled,r(this,n))!==S(i.enabled,r(this,n))||a!==r(this,E))&&l(this,o,ne).call(this,a)}getOptimisticResult(e){const s=r(this,b).getQueryCache().build(r(this,b),e),i=this.createResult(s,e);return Xe(this,i)&&(h(this,y,i),h(this,D,this.options),h(this,I,r(this,n).state)),i}getCurrentResult(){return r(this,y)}trackResult(e,s){const i={};return Object.keys(e).forEach(d=>{Object.defineProperty(i,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),s==null||s(d),e[d])})}),i}trackProp(e){r(this,_).add(e)}getCurrentQuery(){return r(this,n)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,b).defaultQueryOptions(e),i=r(this,b).getQueryCache().build(r(this,b),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return l(this,o,N).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,y)))}createResult(e,s){var fe;const i=r(this,n),d=this.options,c=r(this,y),a=r(this,I),O=r(this,D),C=e!==i?e.state:r(this,q),{state:T}=e;let u={...T},L=!1,m;if(s._optimisticResults){const g=this.hasListeners(),Q=!g&&ve(e,s),k=g&&Pe(e,i,s,d);(Q||k)&&(u={...u,...Be(T.data,e.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:G,errorUpdatedAt:B,status:R}=u;if(s.select&&u.data!==void 0)if(c&&u.data===(a==null?void 0:a.data)&&s.select===r(this,z))m=r(this,F);else try{h(this,z,s.select),m=s.select(u.data),m=be(c==null?void 0:c.data,m,s),h(this,F,m),h(this,P,null)}catch(g){h(this,P,g)}else m=u.data;if(s.placeholderData!==void 0&&m===void 0&&R==="pending"){let g;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(O==null?void 0:O.placeholderData))g=c.data;else if(g=typeof s.placeholderData=="function"?s.placeholderData((fe=r(this,U))==null?void 0:fe.state.data,r(this,U)):s.placeholderData,s.select&&g!==void 0)try{g=s.select(g),h(this,P,null)}catch(Q){h(this,P,Q)}g!==void 0&&(R="success",m=be(c==null?void 0:c.data,g,s),L=!0)}r(this,P)&&(G=r(this,P),m=r(this,F),B=Date.now(),R="error");const A=u.fetchStatus==="fetching",Y=R==="pending",Z=R==="error",de=Y&&A,pe=m!==void 0,v={status:R,fetchStatus:u.fetchStatus,isPending:Y,isSuccess:R==="success",isError:Z,isInitialLoading:de,isLoading:de,data:m,dataUpdatedAt:u.dataUpdatedAt,error:G,errorUpdatedAt:B,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>C.dataUpdateCount||u.errorUpdateCount>C.errorUpdateCount,isFetching:A,isRefetching:A&&!Y,isLoadingError:Z&&!pe,isPaused:u.fetchStatus==="paused",isPlaceholderData:L,isRefetchError:Z&&pe,isStale:le(e,s),refetch:this.refetch,promise:r(this,w)};if(this.options.experimental_prefetchInRender){const g=V=>{v.status==="error"?V.reject(v.error):v.data!==void 0&&V.resolve(v.data)},Q=()=>{const V=h(this,w,v.promise=ge());g(V)},k=r(this,w);switch(k.status){case"pending":e.queryHash===i.queryHash&&g(k);break;case"fulfilled":(v.status==="error"||v.data!==k.value)&&Q();break;case"rejected":(v.status!=="error"||v.error!==k.reason)&&Q();break}}return v}updateResult(e){const s=r(this,y),i=this.createResult(r(this,n),this.options);if(h(this,I,r(this,n).state),h(this,D,this.options),r(this,I).data!==void 0&&h(this,U,r(this,n)),te(i,s))return;h(this,y,i);const d={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,O=typeof a=="function"?a():a;if(O==="all"||!O&&!r(this,_).size)return!0;const f=new Set(O??r(this,_));return this.options.throwOnError&&f.add("error"),Object.keys(r(this,y)).some(C=>{const T=C;return r(this,y)[T]!==s[T]&&f.has(T)})};(e==null?void 0:e.listeners)!==!1&&c()&&(d.listeners=!0),l(this,o,ke).call(this,{...d,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,o,ae).call(this)}},b=new WeakMap,n=new WeakMap,q=new WeakMap,y=new WeakMap,I=new WeakMap,D=new WeakMap,w=new WeakMap,P=new WeakMap,z=new WeakMap,F=new WeakMap,U=new WeakMap,j=new WeakMap,M=new WeakMap,E=new WeakMap,_=new WeakMap,o=new WeakSet,N=function(e){l(this,o,ue).call(this);let s=r(this,n).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(_e)),s},re=function(){l(this,o,oe).call(this);const e=X(this.options.staleTime,r(this,n));if(se||r(this,y).isStale||!ye(e))return;const i=Le(r(this,y).dataUpdatedAt,e)+1;h(this,j,setTimeout(()=>{r(this,y).isStale||this.updateResult()},i))},ie=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,n)):this.options.refetchInterval)??!1},ne=function(e){l(this,o,ce).call(this),h(this,E,e),!(se||S(this.options.enabled,r(this,n))===!1||!ye(r(this,E))||r(this,E)===0)&&h(this,M,setInterval(()=>{(this.options.refetchIntervalInBackground||Ge.isFocused())&&l(this,o,N).call(this)},r(this,E)))},ae=function(){l(this,o,re).call(this),l(this,o,ne).call(this,l(this,o,ie).call(this))},oe=function(){r(this,j)&&(clearTimeout(r(this,j)),h(this,j,void 0))},ce=function(){r(this,M)&&(clearInterval(r(this,M)),h(this,M,void 0))},ue=function(){const e=r(this,b).getQueryCache().build(r(this,b),this.options);if(e===r(this,n))return;const s=r(this,n);h(this,n,e),h(this,q,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},ke=function(e){Qe.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,y))}),r(this,b).getQueryCache().notify({query:r(this,n),type:"observerResultsUpdated"})})},Oe);function Ke(t,e){return S(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ve(t,e){return Ke(t,e)||t.state.data!==void 0&&he(t,e,e.refetchOnMount)}function he(t,e,s){if(S(e.enabled,t)!==!1){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&le(t,e)}return!1}function Pe(t,e,s,i){return(t!==e||S(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&le(t,s)}function le(t,e){return S(e.enabled,t)!==!1&&t.isStaleByTime(X(e.staleTime,t))}function Xe(t,e){return!te(t.getCurrentResult(),e)}var De=x.createContext(!1),$e=()=>x.useContext(De);De.Provider;function Ye(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Ze=x.createContext(Ye()),et=()=>x.useContext(Ze);function tt(t,e){return typeof t=="function"?t(...e):!!t}function Se(){}var st=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},rt=t=>{x.useEffect(()=>{t.clearReset()},[t])},it=({result:t,errorResetBoundary:e,throwOnError:s,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&tt(s,[t.error,i]),nt=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},at=(t,e)=>t.isLoading&&t.isFetching&&!e,ot=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,xe=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function ct(t,e,s){var u,L,m,G,B;const i=Ae(),d=$e(),c=et(),a=i.defaultQueryOptions(t);(L=(u=i.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||L.call(u,a),a._optimisticResults=d?"isRestoring":"optimistic",nt(a),st(a,c),rt(c);const O=!i.getQueryCache().get(a.queryHash),[f]=x.useState(()=>new e(i,a)),C=f.getOptimisticResult(a),T=!d&&t.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(R=>{const A=T?f.subscribe(Qe.batchCalls(R)):Se;return f.updateResult(),A},[f,T]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),x.useEffect(()=>{f.setOptions(a,{listeners:!1})},[a,f]),ot(a,C))throw xe(a,f,c);if(it({result:C,errorResetBoundary:c,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash)}))throw C.error;if((G=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||G.call(m,a,C),a.experimental_prefetchInRender&&!se&&at(C,d)){const R=O?xe(a,f,c):(B=i.getQueryCache().get(a.queryHash))==null?void 0:B.promise;R==null||R.catch(Se).finally(()=>{f.updateResult()})}return a.notifyOnChangeProps?C:f.trackResult(C)}function ut(t,e){return ct(t,Je)}async function ht(t){const e=await fetch(`https://datastore.itcode.dev/blog/popluar/${t}.json`);return e.ok?await e.json():[]}function lt(t,e,s){return ut({queryFn:()=>ht(t),queryKey:["useGetPopularData",t],...e})}function $({type:t,list:e,...s}){const{data:i=[],isLoading:d}=lt(t),c=x.useMemo(()=>e==null?void 0:e.filter(({url:a})=>i.includes(a)),[i,e]);return H.jsx(qe,{"data-component":"ContentPopularGrid",list:We(c),loading:d,...s})}$.__docgenInfo={description:`컨텐츠 인기 그리드 organism 컴포넌트 반환 메서드

@param {ContentPopularGridProps} param0: ContentPopularGridProps

@returns {React.JSX.Element} JSX`,methods:[],displayName:"ContentPopularGrid",props:{type:{required:!0,tsType:{name:"union",raw:"'posts' | 'projects'",elements:[{name:"literal",value:"'posts'"},{name:"literal",value:"'projects'"}]},description:"마크다운 타입"},list:{required:!1,tsType:{name:"Array",elements:[{name:"BlogMarkdownDetailProps",elements:[{name:"MarkdownHeaderProps"}],raw:"BlogMarkdownDetailProps<MarkdownHeaderProps>"}],raw:"BlogMarkdownDetailProps<MarkdownHeaderProps>[]"},description:"컨텐츠 목록"}},composes:["Omit"]};const W="ContentPopularGrid",dt=["posts","projects"],Fe=ze,pt=Ve,kt={argTypes:{className:Ce("children",W),id:Ce("id",W),list:{control:{disable:!0},table:{category:W,subcategory:Re.PROP}},type:{options:dt,table:{category:W,subcategory:Re.PROP}}},component:$,parameters:He("컨텐츠 인기 그리드 컴포넌트",["`ContentGrid` 컴포넌트를 확장하여 인기 컨텐츠를 표현하는 컴포넌트입니다.","`getPostPopularData` API가 내장되어있어, 자동으로 지정한 타입의 인기 게시글 6개를 호출합니다."]),tags:["autodocs"],title:"organism/ContentPopularGrid"},J={args:{list:Fe,type:"posts"}},K={render:t=>H.jsx(Ne,{subtitle:"컨텐츠 타입에 따른 컴포넌트 예시",title:"Type",container:!0,children:H.jsxs("div",{className:"flex flex-col gap-20",children:[H.jsx($,{...t,list:Fe,type:"posts"}),H.jsx($,{...t,list:pt,type:"projects"})]})})};var Te,we,Ee;J.parameters={...J.parameters,docs:{...(Te=J.parameters)==null?void 0:Te.docs,source:{originalSource:`{
  args: {
    list: postsMock,
    type: 'posts'
  }
}`,...(Ee=(we=J.parameters)==null?void 0:we.docs)==null?void 0:Ee.source}}};var Ie,je,Me;K.parameters={...K.parameters,docs:{...(Ie=K.parameters)==null?void 0:Ie.docs,source:{originalSource:`{
  render: props => <StorybookTemplate subtitle="컨텐츠 타입에 따른 컴포넌트 예시" title="Type" container>
            <div className="flex flex-col gap-20">
                <ContentPopularGrid {...props} list={postsMock} type="posts" />
                <ContentPopularGrid {...props} list={projectsMock} type="projects" />
            </div>
        </StorybookTemplate>
}`,...(Me=(je=K.parameters)==null?void 0:je.docs)==null?void 0:Me.source}}};const Dt=["Playground","Type"];export{J as Playground,K as Type,Dt as __namedExportsOrder,kt as default};
