var ee=t=>{throw TypeError(t)};var Z=(t,e,s)=>e.has(t)||ee("Cannot "+s);var i=(t,e,s)=>(Z(t,e,"read from private field"),s?s.call(t):e.get(t)),c=(t,e,s)=>e.has(t)?ee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),o=(t,e,s,r)=>(Z(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),D=(t,e,s)=>(Z(t,e,"access private method"),s);var J=(t,e,s,r)=>({set _(a){o(t,e,a,s)},get _(){return i(t,e,r)}});import{j as $}from"./jsx-runtime-BnHmloXs.js";import{d as Ee}from"./index-ogSvIofg.js";import{r as Qe}from"./index-BzsBhNef.js";import{U as we}from"./index-VWyOwuNZ.js";import{S as me,h as ye,Q as Me,n as p,m as te,R as Te,c as Ce,a as se,b as Q,e as _e,d as De,f as Ae,g as Re,o as re,r as ie,i as Se,j as ae,p as ne,s as qe,k as Fe}from"./QueryClientProvider-BdP51CjG.js";import"./jsx-runtime-BEh3FTX5.js";var v,le,xe=(le=class extends me{constructor(e={}){super();c(this,v);this.config=e,o(this,v,new Map)}build(e,s,r){const a=s.queryKey,n=s.queryHash??ye(a,s);let l=this.get(n);return l||(l=new Me({cache:this,queryKey:a,queryHash:n,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(l)),l}add(e){i(this,v).has(e.queryHash)||(i(this,v).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,v).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,v).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){p.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,v).get(e)}getAll(){return[...i(this,v).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>te(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>te(e,r)):s}notify(e){p.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){p.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){p.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},v=new WeakMap,le),O,d,j,b,A,de,ke=(de=class extends Te{constructor(e){super();c(this,b);c(this,O);c(this,d);c(this,j);this.mutationId=e.mutationId,o(this,d,e.mutationCache),o(this,O,[]),this.state=e.state||Ie(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,O).includes(e)||(i(this,O).push(e),this.clearGcTimeout(),i(this,d).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){o(this,O,i(this,O).filter(s=>s!==e)),this.scheduleGc(),i(this,d).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,O).length||(this.state.status==="pending"?this.scheduleGc():i(this,d).remove(this))}continue(){var e;return((e=i(this,j))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,n,l,m,y,M,T,F,C,L,B,E,x,V,U,f,g,_,k,z;o(this,j,Ce({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(h,I)=>{D(this,b,A).call(this,{type:"failed",failureCount:h,error:I})},onPause:()=>{D(this,b,A).call(this,{type:"pause"})},onContinue:()=>{D(this,b,A).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,d).canRun(this)}));const s=this.state.status==="pending",r=!i(this,j).canStart();try{if(!s){D(this,b,A).call(this,{type:"pending",variables:e,isPaused:r}),await((n=(a=i(this,d).config).onMutate)==null?void 0:n.call(a,e,this));const I=await((m=(l=this.options).onMutate)==null?void 0:m.call(l,e));I!==this.state.context&&D(this,b,A).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const h=await i(this,j).start();return await((M=(y=i(this,d).config).onSuccess)==null?void 0:M.call(y,h,e,this.state.context,this)),await((F=(T=this.options).onSuccess)==null?void 0:F.call(T,h,e,this.state.context)),await((L=(C=i(this,d).config).onSettled)==null?void 0:L.call(C,h,null,this.state.variables,this.state.context,this)),await((E=(B=this.options).onSettled)==null?void 0:E.call(B,h,null,e,this.state.context)),D(this,b,A).call(this,{type:"success",data:h}),h}catch(h){try{throw await((V=(x=i(this,d).config).onError)==null?void 0:V.call(x,h,e,this.state.context,this)),await((f=(U=this.options).onError)==null?void 0:f.call(U,h,e,this.state.context)),await((_=(g=i(this,d).config).onSettled)==null?void 0:_.call(g,void 0,h,this.state.variables,this.state.context,this)),await((z=(k=this.options).onSettled)==null?void 0:z.call(k,void 0,h,e,this.state.context)),h}finally{D(this,b,A).call(this,{type:"error",error:h})}}finally{i(this,d).runNext(this)}}},O=new WeakMap,d=new WeakMap,j=new WeakMap,b=new WeakSet,A=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),p.batch(()=>{i(this,O).forEach(r=>{r.onMutationUpdate(e)}),i(this,d).notify({mutation:this,type:"updated",action:e})})},de);function Ie(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var w,P,Y,fe,je=(fe=class extends me{constructor(e={}){super();c(this,w);c(this,P);c(this,Y);this.config=e,o(this,w,new Set),o(this,P,new Map),o(this,Y,0)}build(e,s,r){const a=new ke({mutationCache:this,mutationId:++J(this,Y)._,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){i(this,w).add(e);const s=X(e);if(typeof s=="string"){const r=i(this,P).get(s);r?r.push(e):i(this,P).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,w).delete(e)){const s=X(e);if(typeof s=="string"){const r=i(this,P).get(s);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&i(this,P).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=X(e);if(typeof s=="string"){const r=i(this,P).get(s),a=r==null?void 0:r.find(n=>n.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const s=X(e);if(typeof s=="string"){const a=(r=i(this,P).get(s))==null?void 0:r.find(n=>n!==e&&n.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){p.batch(()=>{i(this,w).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,w).clear(),i(this,P).clear()})}getAll(){return Array.from(i(this,w))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>se(s,r))}findAll(e={}){return this.getAll().filter(s=>se(e,s))}notify(e){p.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return p.batch(()=>Promise.all(e.map(s=>s.continue().catch(Q))))}},w=new WeakMap,P=new WeakMap,Y=new WeakMap,fe);function X(t){var e;return(e=t.options.scope)==null?void 0:e.id}function ue(t){return{onFetch:(e,s)=>{var T,F,C,L,B;const r=e.options,a=(C=(F=(T=e.fetchOptions)==null?void 0:T.meta)==null?void 0:F.fetchMore)==null?void 0:C.direction,n=((L=e.state.data)==null?void 0:L.pages)||[],l=((B=e.state.data)==null?void 0:B.pageParams)||[];let m={pages:[],pageParams:[]},y=0;const M=async()=>{let E=!1;const x=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},V=_e(e.options,e.fetchOptions),U=async(f,g,_)=>{if(E)return Promise.reject();if(g==null&&f.pages.length)return Promise.resolve(f);const k={queryKey:e.queryKey,pageParam:g,direction:_?"backward":"forward",meta:e.options.meta};x(k);const z=await V(k),{maxPages:h}=e.options,I=_?De:Ae;return{pages:I(f.pages,z,h),pageParams:I(f.pageParams,g,h)}};if(a&&n.length){const f=a==="backward",g=f?He:oe,_={pages:n,pageParams:l},k=g(r,_);m=await U(_,k,f)}else{const f=t??n.length;do{const g=y===0?l[0]??r.initialPageParam:oe(r,m);if(y>0&&g==null)break;m=await U(m,g),y++}while(y<f)}return m};e.options.persister?e.fetchFn=()=>{var E,x;return(x=(E=e.options).persister)==null?void 0:x.call(E,M,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=M}}}function oe(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function He(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var u,R,S,H,K,q,G,N,pe,Ke=(pe=class{constructor(t={}){c(this,u);c(this,R);c(this,S);c(this,H);c(this,K);c(this,q);c(this,G);c(this,N);o(this,u,t.queryCache||new xe),o(this,R,t.mutationCache||new je),o(this,S,t.defaultOptions||{}),o(this,H,new Map),o(this,K,new Map),o(this,q,0)}mount(){J(this,q)._++,i(this,q)===1&&(o(this,G,Re.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,u).onFocus())})),o(this,N,re.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,u).onOnline())})))}unmount(){var t,e;J(this,q)._--,i(this,q)===0&&((t=i(this,G))==null||t.call(this),o(this,G,void 0),(e=i(this,N))==null||e.call(this),o(this,N,void 0))}isFetching(t){return i(this,u).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,R).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,u).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=i(this,u).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ie(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return i(this,u).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),a=i(this,u).get(r.queryHash),n=a==null?void 0:a.state.data,l=Se(e,n);if(l!==void 0)return i(this,u).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return p.batch(()=>i(this,u).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,u).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,u);p.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,u),r={type:"active",...t};return p.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=p.batch(()=>i(this,u).findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(Q).catch(Q)}invalidateQueries(t,e={}){return p.batch(()=>{if(i(this,u).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const s={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(s,e)})}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=p.batch(()=>i(this,u).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let n=a.fetch(void 0,s);return s.throwOnError||(n=n.catch(Q)),a.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(r).then(Q)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,u).build(this,e);return s.isStaleByTime(ie(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Q).catch(Q)}fetchInfiniteQuery(t){return t.behavior=ue(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Q).catch(Q)}ensureInfiniteQueryData(t){return t.behavior=ue(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return re.isOnline()?i(this,R).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,u)}getMutationCache(){return i(this,R)}getDefaultOptions(){return i(this,S)}setDefaultOptions(t){o(this,S,t)}setQueryDefaults(t,e){i(this,H).set(ae(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,H).values()],s={};return e.forEach(r=>{ne(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){i(this,K).set(ae(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,K).values()];let s={};return e.forEach(r=>{ne(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,S).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=ye(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===qe&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,S).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,u).clear(),i(this,R).clear()}},u=new WeakMap,R=new WeakMap,S=new WeakMap,H=new WeakMap,K=new WeakMap,q=new WeakMap,G=new WeakMap,N=new WeakMap,pe);const{useParameter:Ge,addons:Ne,useEffect:Le,useMemo:ht,definePreview:ct}=__STORYBOOK_MODULE_PREVIEW_API__,{deprecate:Be}=__STORYBOOK_MODULE_CLIENT_LOGGER__;var Ue=Object.defineProperty,ge=(t,e)=>{for(var s in e)Ue(t,s,{get:e[s],enumerable:!0})},Ye={};ge(Ye,{initialGlobals:()=>Je});var W="themes",Ve=`storybook/${W}`,Pe="theme",he={},ze={REGISTER_THEMES:`${Ve}/REGISTER_THEMES`},Je={[Pe]:""},Xe={};ge(Xe,{initializeThemeState:()=>Oe,pluckThemeFromContext:()=>ve,useThemeParameters:()=>$e});function ve({globals:t}){return t[Pe]||""}function $e(t){return Be(Ee`The useThemeParameters function is deprecated. Please access parameters via the context directly instead e.g.
    - const { themeOverride } = context.parameters.themes ?? {};
    `),t?t.parameters[W]??he:Ge(W,he)}function Oe(t,e){Ne.getChannel().emit(ze.REGISTER_THEMES,{defaultTheme:e,themes:t})}var We="html",ce=t=>t.split(" ").filter(Boolean),Ze=({themes:t,defaultTheme:e,parentSelector:s=We})=>(Oe(Object.keys(t),e),(r,a)=>{let{themeOverride:n}=a.parameters[W]??{},l=ve(a);return Le(()=>{let m=n||l||e,y=document.querySelector(s);if(!y)return;Object.entries(t).filter(([T])=>T!==m).forEach(([T,F])=>{let C=ce(F);C.length>0&&y.classList.remove(...C)});let M=ce(t[m]);M.length>0&&y.classList.add(...M)},[n,l]),r()}),et=function(){return null};function be({client:t,buttonPosition:e,children:s}){const r=Qe.useMemo(()=>t??new Ke({defaultOptions:{queries:{staleTime:36e5}}}),[t]);return $.jsxs(Fe,{client:r,children:[s,$.jsx(et,{buttonPosition:e})]})}be.__docgenInfo={description:`react-query 프로바이더 organism 컴포넌트 반환 메서드

@returns {React.JSX.Element} JSX`,methods:[],displayName:"QueryProvider",props:{client:{required:!1,tsType:{name:"QueryClient"},description:"기본 react-query 객체"},buttonPosition:{required:!1,tsType:{name:"ComponentProps['buttonPosition']",raw:"ComponentProps<typeof ReactQueryDevtools>['buttonPosition']"},description:"버튼 위치"}},composes:["PropsWithChildren"]};const tt=we({base:"dark",fontBase:"Pretendard, sans-serif"}),lt={decorators:[Ze({defaultTheme:"dark",themes:{dark:"dark",light:""}}),(t,e)=>$.jsx(be,{children:$.jsx(t,{...e})})],globalTypes:{theme:{defaultValue:"dark",description:"Global theme for components",name:"Theme",toolbar:{icon:"moon",items:[{icon:"sun",title:"Light Mode",value:"light"},{icon:"moon",title:"Dark Mode",value:"dark"}],showName:!0}}},parameters:{docs:{theme:tt}}};export{lt as default};
